from graphviz import Digraph

# Create a new directed graph
er_diagram = Digraph("ER_Diagram", format="png")

# Entities
entities = {
    "Books": ["Book_ID", "Title", "Author", "Genre", "ISBN", "Published_Year"],
    "Members": ["Member_ID", "Name", "Address", "Email", "Phone_Number"],
    "Librarians": ["Librarian_ID", "Name", "Email", "Phone_Number"],
    "Borrowing": ["Borrow_ID", "Borrow_Date", "Return_Date", "Fine_Amount", "Book_ID", "Member_ID"],
    "Reservations": ["Reservation_ID", "Reservation_Date", "Book_ID", "Member_ID"],
}

# Add entities and their attributes
for entity, attributes in entities.items():
    er_diagram.node(entity, f"{entity}\n" + "\n".join(attributes), shape="box")

# Relationships
relationships = [
    ("Books", "Borrowing"),
    ("Members", "Borrowing"),
    ("Books", "Reservations"),
    ("Members", "Reservations"),
    ("Librarians", "Borrowing"),
]

# Add relationships
for start, end in relationships:
    er_diagram.edge(start, end)

# Save diagram
er_diagram.render("/mnt/data/Library_Management_ERD")
